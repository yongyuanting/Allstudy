<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        div{
            position: absolute;
            width: 100px;
            height: 100px;
            background-color: pink;
            top: 0;
            left: 0;
        }
        span{
            display: block;
            position: absolute;
            width: 100px;
            height: 100px;
            background-color: skyblue;
            top: 0;
            left: 100px;
        }
    </style>
</head>
<body>
<button>点击才走</button>
<div></div>
<span></span>
<script>
    //动画的核心就是使用定时器
    //获得盒子当前的位置
    //让盒子在当前位置上移动1个距离
    //用定时器不断操作
    //加一个结束定时的条件
    //这个元素要用定位，才能使用element。style。left

    /*
    * 封装函数
    * */
    function animate(obj,target){
        // var timer = setInterval(function (){

        //设置只有一个定时器
        //先清除，在生产一个定时器
        clearInterval(obj.timer);


        obj.timer = setInterval(function (){
            if (obj.offsetLeft>=target){
                //停止动画
                // clearInterval(timer);
                clearInterval(obj.timer);
            }else if(obj.offsetLeft<=target){
                obj.style.left = obj.offsetLeft+5+'px';
            }
        },10);
    }

    var div = document.querySelector('div');
    var span = document.querySelector('span');
    var btn = document.querySelector('button');
    //必须使用left赋值
    // div.style.left = div.offsetLeft+1+"px";
    // var timer = setInterval(function (){
    //     if (div.offsetLeft>=500){
    //         //停止动画
    //         // clearInterval(timer);
    //         clearInterval(timer);
    //     }else if (div.offsetLeft<=500){
    //         div.style.left = div.offsetLeft+5+'px';
    //     }
    // },10)
    //到200就会停住，因为清楚功能timer都清除掉了
    //给不同的元素指定不同的定时器obj.timer
    animate(div,200);
    // animate(span,900);
    btn.addEventListener('click',function (){
        //不断点击按钮，元素越来越快，因为开启了多个定时器
        //设置只有一个定时器
        animate(span,900);
    })
</script>

</body>
</html>